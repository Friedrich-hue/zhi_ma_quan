# Phase 00 测试待办清单

> 基于 `phase_00_static_order_demo.md` 方案实施后需要测试的功能点

---

## 商品列表页

- [ ] 页面加载后正确显示商品列表
- [ ] 商品卡片显示商品图片、名称、规格、价格
- [ ] 有折扣的商品显示原价（划线）和促销价
- [ ] 有折扣的商品显示"Sale"标签
- [ ] 点击"+"按钮能添加商品到购物车
- [ ] 商品已在购物车时显示数量控制器（- 数量 +）
- [ ] 点击"+"能增加购物车数量
- [ ] 点击"-"能减少购物车数量
- [ ] 数量减到0时商品从购物车移除，恢复"+"按钮
- [ ] 底部 Tabbar 购物车图标显示商品数量角标
- [ ] 角标数量与购物车总数一致

## 商品详情页

- [ ] 点击商品卡片进入详情页
- [ ] 显示商品轮播图
- [ ] 显示商品价格（促销价、原价、折扣百分比）
- [ ] 显示商品名称、规格
- [ ] 显示商品描述
- [ ] 显示配送信息提示
- [ ] 底部数量选择器可增减数量
- [ ] 数量最小值为1
- [ ] "Add to Cart"按钮显示正确金额（单价 × 数量）
- [ ] 点击"Add to Cart"商品添加到购物车
- [ ] 商品已在购物车时显示"X in cart"提示
- [ ] 添加后"X in cart"提示数量正确累加

## 购物车页面

- [ ] 空购物车显示空状态提示
- [ ] 空状态点击"Start Shopping"跳转商品列表
- [ ] 显示所有购物车商品
- [ ] 每个商品显示图片、名称、规格、单价、数量
- [ ] 点击"+"增加商品数量
- [ ] 点击"-"减少商品数量
- [ ] 数量减到1时再点"-"弹出删除确认框
- [ ] 确认删除后商品从购物车移除
- [ ] 点击删除按钮弹出删除确认框
- [ ] 显示小计（商品件数和金额）
- [ ] 显示运费（3-4件 RM12，≥5件免运费）
- [ ] 不足5件时显示"Add X more for free shipping"提示
- [ ] 满5件时运费显示"FREE"
- [ ] 显示订单总额（小计 + 运费）
- [ ] 不足3件时"Checkout"按钮禁用
- [ ] 满3件时"Checkout"按钮可点击

## 地址管理

- [ ] 无地址时结算页显示"Add shipping address"
- [ ] 点击后进入地址列表页
- [ ] 地址列表为空时显示空状态
- [ ] 点击"Add Address"进入地址编辑页
- [ ] 地址表单包含：收件人姓名、电话（可选）、地址行1、地址行2（可选）、城市、州、邮编
- [ ] 必填字段验证
- [ ] 州选择器只能选择 Kuala Lumpur 或 Selangor
- [ ] 保存地址后返回地址列表
- [ ] 地址列表显示所有已保存地址
- [ ] 可设置默认地址
- [ ] 可编辑已有地址
- [ ] 可删除地址（需确认）
- [ ] 结算页选择地址后返回并显示选中地址

## 结算页

- [ ] 显示选中的配送地址
- [ ] 点击"Change"可更换地址
- [ ] 非配送范围地址显示警告提示
- [ ] 配送日期选择器显示未来14天内的周三、周六
- [ ] 配送时间段选择器（09:00-12:00 / 12:00-17:00 / 17:00-21:00）
- [ ] WhatsApp 号码输入（可选）
- [ ] 门牌号输入（可选）
- [ ] 备注输入（可选）
- [ ] 显示订单商品列表（图片、名称、规格、单价、数量）
- [ ] 显示订单汇总（小计、运费、总额）
- [ ] 未选地址时"Place Order"按钮禁用
- [ ] 地址不在配送范围时"Place Order"按钮禁用
- [ ] 未选配送日期时"Place Order"按钮禁用
- [ ] 未选配送时间时"Place Order"按钮禁用
- [ ] 信息完整时"Place Order"按钮可点击

## 提交订单

- [ ] 点击"Place Order"显示加载状态
- [ ] 订单创建成功后清空购物车
- [ ] 跳转到订单详情页
- [ ] 生成唯一订单号（order_no）

## 订单列表页

- [ ] 显示所有历史订单
- [ ] 订单按创建时间倒序排列
- [ ] 每个订单显示订单号、状态、创建时间、总金额
- [ ] 订单状态显示"待支付（演示）"
- [ ] 点击订单进入订单详情页
- [ ] 无订单时显示空状态

## 订单详情页

- [ ] 显示订单号
- [ ] 显示订单状态
- [ ] 显示配送地址快照（修改地址不影响历史订单）
- [ ] 显示配送偏好（日期、时间、WhatsApp、门牌号、备注）
- [ ] 显示订单商品列表（快照数据）
- [ ] 显示订单金额汇总

## 数据持久化

- [ ] 刷新页面后购物车数据恢复
- [ ] 刷新页面后地址数据恢复
- [ ] 刷新页面后订单数据恢复
- [ ] 关闭浏览器重新打开后数据恢复
- [ ] Tabbar 角标在页面刷新后正确显示

## 跨页面状态同步

- [ ] 详情页添加商品后返回列表页数量正确显示
- [ ] 购物车修改数量后返回列表页数量正确显示
- [ ] 任意页面操作后 Tabbar 角标实时更新

## 边界情况

- [ ] 商品数量大于99时角标显示"99+"
- [ ] 金额计算精度正确（保留2位小数）
- [ ] 长商品名称正确截断显示
- [ ] 网络异常时的错误提示（如适用）

## 代码规范验收

- [ ] 页面层无直接引用 mock 数据
- [ ] 所有数据通过 service 层获取
- [ ] 字段命名使用 snake_case
- [ ] 商品/地址/订单结构符合文档定义
